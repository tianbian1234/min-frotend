{"ast":null,"code":"import _classCallCheck from \"/Users/a/min_frotend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/a/min_frotend/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/a/min_frotend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/a/min_frotend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/a/min_frotend/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/a/min_frotend/src/components_common/demo2048/index.js\";\nimport React, { Component } from 'react';\nimport './index.scss';\n\nvar Demo2048 =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Demo2048, _Component);\n\n  function Demo2048(props) {\n    var _this;\n\n    _classCallCheck(this, Demo2048);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Demo2048).call(this, props));\n\n    _this.judgeKeyCode = function (keyCode) {};\n\n    _this.getDigital = function () {\n      for (var i = 0; i < 4; i++) {\n        _this.digital[i] = [];\n\n        for (var j = 0; j < 4; j++) {\n          _this.digital[i][j] = 0;\n        }\n      }\n    };\n\n    _this.drawRect = function (x, y, c) {\n      _this.ctx.beginPath();\n\n      _this.ctx.fillStyle = c;\n\n      _this.ctx.moveTo(x, y);\n\n      _this.ctx.arcTo(x + _this.box_width, y, x + _this.box_width, y + 1, _this.margin_width * 0.7);\n\n      _this.ctx.arcTo(x + _this.box_width, y + _this.box_width, x + _this.box_width - 1, y + _this.box_width, _this.margin_width * 0.7);\n\n      _this.ctx.arcTo(x, y + _this.box_width, x, y + _this.box_width - 1, _this.margin_width * 0.7);\n\n      _this.ctx.arcTo(x, y, x + 1, y, _this.margin_width * 0.7);\n\n      _this.ctx.fill();\n    };\n\n    _this.drawBack = function () {\n      _this.ctx.beginPath();\n\n      _this.ctx.fillStyle = '#f0d799';\n\n      _this.ctx.fillRect(0, 0, _this.width, _this.height);\n\n      for (var i = 0; i < 4; i++) {\n        for (var j = 0; j < 4; j++) {\n          var c = '';\n\n          if (_this.digital[i][j] == 0) {\n            c = \"#D7C184 \";\n          }\n\n          if (_this.digital[i][j] == 2) {\n            c = \"#f5bb82 \";\n          }\n\n          if (_this.digital[i][j] == 4) {\n            c = \"#DBB280 \";\n          }\n\n          if (_this.digital[i][j] == 8) {\n            c = \"#E1C57A \";\n          }\n\n          if (_this.digital[i][j] == 16) {\n            c = \"#E8B173 \";\n          }\n\n          if (_this.digital[i][j] == 32) {\n            c = \"#F2A769 \";\n          }\n\n          if (_this.digital[i][j] == 64) {\n            c = \"#e08931 \";\n          }\n\n          if (_this.digital[i][j] == 128) {\n            c = \"#f27f0c \";\n          }\n\n          if (_this.digital[i][j] == 256) {\n            c = \"#f76063 \";\n          }\n\n          if (_this.digital[i][j] == 512) {\n            c = \"#e84648 \";\n          }\n\n          if (_this.digital[i][j] == 1024) {\n            c = \"#b03133 \";\n          }\n\n          if (_this.digital[i][j] == 2048) {\n            c = \"#fc080c \";\n          }\n\n          var x = _this.margin_width + i * (_this.box_width + _this.margin_width);\n          var y = _this.margin_width + j * (_this.box_width + _this.margin_width);\n\n          _this.drawRect(x, y, c);\n        }\n      }\n    };\n\n    _this.createRandom = function () {\n      var x = Math.round(Math.random() * 3);\n      var y = Math.round(Math.random() * 3);\n\n      if (_this.digital[x][y] === 0) {\n        _this.digital[x][y] = 2;\n      } else {\n        _this.createRandom();\n      }\n    };\n\n    _this.drawDigital = function () {\n      for (var i = 0; i < 4; i++) {\n        for (var j = 0; j < 4; j++) {\n          if (_this.digital[i][j] > 0) {\n            _this.ctx.beginPath();\n\n            _this.ctx.textAlign = 'center';\n            _this.ctx.textBaseline = 'middle';\n            _this.ctx.fillStyle = 'red';\n            _this.ctx.font = '40px Arial';\n            var x = _this.margin_width + i * (_this.box_width + _this.margin_width) + _this.box_width / 2;\n            var y = _this.margin_width + j * (_this.box_width + _this.margin_width) + _this.box_width / 2;\n\n            _this.ctx.fillText(_this.digital[i][j], x, y);\n          }\n        }\n      }\n    };\n\n    _this.checkDigital = function (arr) {\n      var flag = false;\n\n      if (arr[0] === 0 && arr[1] === 0 && arr[2] === 0 && arr[3] === 0 || arr[0] > 0 && arr[1] === 0 && arr[2] === 0 && arr[3] === 0 || arr[0] > 0 && arr[1] > 0 && arr[2] === 0 && arr[3] === 0 || arr[0] > 0 && arr[1] > 0 && arr[2] > 0 && arr[3] === 0 || arr[0] > 0 && arr[1] > 0 && arr[2] > 0 && arr[3] > 0) {\n        flag = true;\n      }\n\n      if (arr[0] === arr[1] && arr[0] !== 0 || arr[1] === arr[2] && arr[1] !== 0 || arr[2] === arr[3] && arr[2] !== 0 || arr[3] === arr[4] && arr[3] !== 0) {\n        flag = false;\n      }\n\n      return flag;\n    };\n\n    _this.changeDigital = function (arr) {\n      for (var i = 0; i < 3; i++) {\n        if (arr[i] == 0) {\n          var temp = arr[i];\n          arr[i] = arr[i + 1];\n          arr[i + 1] = temp;\n        }\n\n        if (arr[i] == arr[i + 1] && arr[i] != 0) {\n          arr[i] = arr[i] + arr[i + 1];\n          arr[i + 1] = 0;\n        }\n      }\n\n      if (_this.checkDigital(arr)) {\n        return arr;\n      } else {\n        return _this.changeDigital(arr);\n      }\n    };\n\n    _this.data = null;\n    _this.ctx = null;\n    _this.width = null;\n    _this.height = null;\n    _this.box_width = null;\n    _this.margin_width = null;\n    _this.digital = [];\n    return _this;\n  }\n\n  _createClass(Demo2048, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      this.ctx = this.container.getContext('2d');\n      this.width = this.ctx.canvas.width;\n      this.height = this.ctx.canvas.height;\n      this.box_width = this.width * 0.8 * 0.25;\n      this.margin_width = this.width * 0.2 * 0.20;\n      this.getDigital();\n      this.createRandom();\n      this.drawBack();\n      this.drawDigital();\n      window.addEventListener('keydown', function (event) {\n        var e = event || window.event;\n\n        _this2.judgeKeyCode(e && e.keyCode);\n\n        if (e && e.keyCode === 37) {\n          for (var i = 0; i < 4; i++) {\n            var arr = [];\n            arr[0] = _this2.digital[0][i];\n            arr[1] = _this2.digital[1][i];\n            arr[2] = _this2.digital[2][i];\n            arr[3] = _this2.digital[3][i];\n\n            if (!_this2.checkDigital(arr)) {\n              arr = _this2.changeDigital(arr);\n            }\n\n            _this2.digital[0][i] = arr[0];\n            _this2.digital[1][i] = arr[1];\n            _this2.digital[2][i] = arr[2];\n            _this2.digital[3][i] = arr[3];\n          }\n\n          if (false) {\n            alert(\"GAME OVER\");\n          } else {\n            _this2.ctx.clearRect(0, 0, _this2.width, _this2.height);\n\n            _this2.createRandom();\n\n            _this2.drawBack();\n\n            _this2.drawDigital();\n          }\n        }\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return React.createElement(\"canvas\", {\n        ref: function ref(el) {\n          return _this3.container = el;\n        },\n        width: \"500\",\n        height: \"500\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183\n        },\n        __self: this\n      });\n    }\n  }]);\n\n  return Demo2048;\n}(Component);\n\nexport { Demo2048 as default };","map":{"version":3,"sources":["/Users/a/min_frotend/src/components_common/demo2048/index.js"],"names":["React","Component","Demo2048","props","judgeKeyCode","keyCode","getDigital","i","digital","j","drawRect","x","y","c","ctx","beginPath","fillStyle","moveTo","arcTo","box_width","margin_width","fill","drawBack","fillRect","width","height","createRandom","Math","round","random","drawDigital","textAlign","textBaseline","font","fillText","checkDigital","arr","flag","changeDigital","temp","data","container","getContext","canvas","window","addEventListener","event","e","alert","clearRect","el"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport './index.scss';\n\nexport default class Demo2048 extends Component{\n    constructor(props){\n        super(props)\n        this.data = null;\n        this.ctx = null;\n        this.width = null;\n        this.height = null;\n        this.box_width = null;\n        this.margin_width = null;\n        this.digital = [];\n    }\n    componentDidMount(){\n        this.ctx = this.container.getContext('2d');\n\n        this.width = this.ctx.canvas.width;\n        this.height = this.ctx.canvas.height;\n\n        this.box_width = this.width*0.8*0.25;\n        this.margin_width = this.width*0.2*0.20;\n\n        this.getDigital();\n\n        this.createRandom();\n        this.drawBack();\n        this.drawDigital();\n\n        window.addEventListener('keydown', (event) => {\n            let e = event || window.event;\n            this.judgeKeyCode(e && e.keyCode)\n            if(e && e.keyCode === 37){\n                for(let i = 0; i < 4; i++){\n                    let arr = [];\n                    arr[0] = this.digital[0][i];\n                    arr[1] = this.digital[1][i];\n                    arr[2] = this.digital[2][i];\n                    arr[3] = this.digital[3][i];\n                    if(!this.checkDigital(arr)){\n                        arr=this.changeDigital(arr);\n                    }\n                    this.digital[0][i]=arr[0];\n                    this.digital[1][i]=arr[1];\n                    this.digital[2][i]=arr[2];\n                    this.digital[3][i]=arr[3];\n                }\n\n                if (false) {\n                    alert(\"GAME OVER\");\n                }else{\n                    this.ctx.clearRect(0, 0, this.width, this.height);\n                    this.createRandom();\n                    this.drawBack();\n                    this.drawDigital();\n                }\n            }\n        })        \n\n    }\n    judgeKeyCode = (keyCode) => {\n        \n    }  \n\n    getDigital = () =>{\n        for(let i=0; i < 4; i++){\n            this.digital[i] = [];\n            for (let j = 0; j < 4; j++){\n                this.digital[i][j] = 0;\n            }\n        }\n    }\n    // 绘制小方块\n    drawRect = (x, y, c) => {\n        this.ctx.beginPath();\n        this.ctx.fillStyle=c;\n        this.ctx.moveTo(x,y);\n        this.ctx.arcTo(x+this.box_width,y,x+this.box_width,y+1,this.margin_width*0.7);\n        this.ctx.arcTo(x+this.box_width,y+this.box_width,x+this.box_width-1,y+this.box_width,this.margin_width*0.7);\n        this.ctx.arcTo(x,y+this.box_width,x,y+this.box_width-1,this.margin_width*0.7);\n        this.ctx.arcTo(x,y,x+1,y,this.margin_width*0.7);\n        this.ctx.fill();\n    }\n    // 绘制背景\n    drawBack = () => {\n        this.ctx.beginPath();\n        this.ctx.fillStyle = '#f0d799';\n        this.ctx.fillRect(0, 0, this.width, this.height);\n        for(let i = 0; i < 4; i++){\n            for(let j = 0; j < 4; j++){\n                let c = '';\n                if(this.digital[i][j]==0){c=\"#D7C184 \";}\n                if(this.digital[i][j]==2){c=\"#f5bb82 \";}\n                if(this.digital[i][j]==4){c=\"#DBB280 \";}\n                if(this.digital[i][j]==8){c=\"#E1C57A \";}\n                if(this.digital[i][j]==16){c=\"#E8B173 \";}\n                if(this.digital[i][j]==32){c=\"#F2A769 \";}\n                if(this.digital[i][j]==64){c=\"#e08931 \";}\n                if(this.digital[i][j]==128){c=\"#f27f0c \";}\n                if(this.digital[i][j]==256){c=\"#f76063 \";}\n                if(this.digital[i][j]==512){c=\"#e84648 \";}\n                if(this.digital[i][j]==1024){c=\"#b03133 \";}\n                if(this.digital[i][j]==2048){c=\"#fc080c \";}\n                let x=this.margin_width+i*(this.box_width+this.margin_width);\n                let y=this.margin_width+j*(this.box_width+this.margin_width);\n                this.drawRect(x,y,c);\n            }\n        }\n    }\n    // 生成随机数\n    createRandom = () => {\n        let x = Math.round( Math.random() * 3 )\n        let y = Math.round( Math.random() * 3 )\n\n        if(this.digital[x][y] === 0){\n            this.digital[x][y] = 2\n        }else{\n            this.createRandom();\n        }\n\n    }\n    // 绘制数字\n    drawDigital = () => {\n        for(let i = 0; i < 4; i++){\n            for(let j = 0; j < 4; j++){\n                if(this.digital[i][j] > 0){\n                    this.ctx.beginPath();\n                    this.ctx.textAlign = 'center';\n                    this.ctx.textBaseline = 'middle';\n                    this.ctx.fillStyle = 'red';\n                    this.ctx.font = '40px Arial';\n                    let x = this.margin_width + i * ( this.box_width + this.margin_width ) + this.box_width / 2;\n                    let y = this.margin_width + j * ( this.box_width + this.margin_width ) + this.box_width / 2;\n                    this.ctx.fillText(this.digital[i][j], x, y);\n                }\n            }\n        }\n    }\n    // 判断数组是否已经按列排好\n    checkDigital = (arr) => {\n        var flag=false;\n        if (arr[0] === 0 && arr[1] === 0 && arr[2] === 0 && arr[3] === 0||\n                arr[0] > 0 && arr[1] === 0 && arr[2] === 0 && arr[3] === 0||\n                arr[0] > 0 && arr[1] > 0 && arr[2] === 0 && arr[3] === 0||\n                arr[0] > 0 && arr[1] > 0 && arr[2] > 0 && arr[3] === 0||\n                arr[0] > 0 && arr[1] > 0 && arr[2] > 0 && arr[3] > 0) {\n            flag=true;\n        }\n        if (arr[0] === arr[1] && arr[0] !== 0 ||\n            arr[1] === arr[2] && arr[1] !== 0 ||\n            arr[2] === arr[3] && arr[2] !== 0 ||\n            arr[3] === arr[4] && arr[3] !== 0\n        ) {\n            flag=false;\n        }\n        return flag;\n    }\n\n    changeDigital = (arr) => {\n        for ( let i = 0; i <3; i++) {\n\t\t\tif (arr[i]==0) {\n\t\t\t\tvar temp=arr[i];\n\t\t\t\tarr[i]=arr[i+1];\n\t\t\t\tarr[i+1]=temp;\n\t\t\t}\n\t\t\tif (arr[i]==arr[i+1]&&arr[i]!=0) {\n\t\t\t\tarr[i]=arr[i]+arr[i+1];\n\t\t\t\tarr[i+1]=0;\n\t\t\t}\t\t\n\t\t}\n\t\tif (this.checkDigital(arr)){\n\t\t\treturn arr;\n\t\t}else{\n\t\t\treturn this.changeDigital(arr);\n\t\t}\n    }\n\n\n\n\n    render(){\n        return(\n            <canvas ref={el => this.container = el} width=\"500\" height=\"500\"></canvas>\n        )\n    }\n}"]},"metadata":{},"sourceType":"module"}