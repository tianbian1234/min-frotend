{"ast":null,"code":"import _classCallCheck from \"/Users/a/min_frotend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/a/min_frotend/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/a/min_frotend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/a/min_frotend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/a/min_frotend/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/a/min_frotend/src/components_common/demo2048/index.js\";\nimport React, { Component } from 'react';\nimport './index.scss';\n\nvar Demo2048 =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Demo2048, _Component);\n\n  function Demo2048(props) {\n    var _this;\n\n    _classCallCheck(this, Demo2048);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Demo2048).call(this, props));\n\n    _this.judgeKeyCode = function (keyCode) {\n      if (keyCode === 37) {\n        for (var i = 0; i < 4; i++) {\n          var arr = [];\n          arr[0] = _this.digital[0][i];\n          arr[1] = _this.digital[1][i];\n          arr[2] = _this.digital[2][i];\n          arr[3] = _this.digital[3][i];\n\n          if (!_this.checkDigital(arr)) {\n            arr = _this.changeDigital(arr);\n          }\n\n          _this.digital[0][i] = arr[0];\n          _this.digital[1][i] = arr[1];\n          _this.digital[2][i] = arr[2];\n          _this.digital[3][i] = arr[3];\n        }\n\n        if (false) {\n          alert(\"GAME OVER\");\n        } else {\n          _this.ctx.clearRect(0, 0, _this.width, _this.height);\n\n          _this.createRandom();\n\n          _this.drawBack();\n\n          _this.drawDigital();\n        }\n      } else if (keyCode === 38) {\n        for (var _i = 0; _i < 4; _i++) {\n          var _arr = [];\n          _arr[0] = _this.digital[_i][0];\n          _arr[1] = _this.digital[_i][1];\n          _arr[2] = _this.digital[_i][2];\n          _arr[3] = _this.digital[_i][3];\n\n          if (!_this.checkDigital(_arr)) {\n            _arr = _this.changeDigital(_arr);\n          }\n\n          _this.digital[_i][0] = _arr[0];\n          _this.digital[_i][1] = _arr[1];\n          _this.digital[_i][2] = _arr[2];\n          _this.digital[_i][3] = _arr[3];\n        }\n\n        if (false) {\n          alert(\"GAME OVER\");\n        } else {\n          _this.ctx.clearRect(0, 0, _this.width, _this.height);\n\n          _this.createRandom();\n\n          _this.drawBack();\n\n          _this.drawDigital();\n        }\n      } else if (keyCode === 39) {\n        for (var _i2 = 0; _i2 < 4; _i2++) {\n          var _arr2 = [];\n          _arr2[0] = _this.digital[3][_i2];\n          _arr2[1] = _this.digital[2][_i2];\n          _arr2[2] = _this.digital[1][_i2];\n          _arr2[3] = _this.digital[0][_i2];\n\n          if (!_this.checkDigital(_arr2)) {\n            _arr2 = _this.changeDigital(_arr2);\n          }\n\n          _this.digital[3][_i2] = _arr2[0];\n          _this.digital[2][_i2] = _arr2[1];\n          _this.digital[1][_i2] = _arr2[2];\n          _this.digital[0][_i2] = _arr2[3];\n        }\n\n        if (false) {\n          alert(\"GAME OVER\");\n        } else {\n          _this.ctx.clearRect(0, 0, _this.width, _this.height);\n\n          _this.createRandom();\n\n          _this.drawBack();\n\n          _this.drawDigital();\n        }\n      } else if (keyCode === 40) {\n        for (var _i3 = 0; _i3 < 4; _i3++) {\n          var _arr3 = [];\n          _arr3[0] = _this.digital[_i3][3];\n          _arr3[1] = _this.digital[_i3][2];\n          _arr3[2] = _this.digital[_i3][1];\n          _arr3[3] = _this.digital[_i3][0];\n\n          if (!_this.checkDigital(_arr3)) {\n            _arr3 = _this.changeDigital(_arr3);\n          }\n\n          _this.digital[_i3][3] = _arr3[0];\n          _this.digital[_i3][2] = _arr3[1];\n          _this.digital[_i3][1] = _arr3[2];\n          _this.digital[_i3][0] = _arr3[3];\n        }\n\n        if (false) {\n          alert(\"GAME OVER\");\n        } else {\n          _this.ctx.clearRect(0, 0, _this.width, _this.height);\n\n          _this.createRandom();\n\n          _this.drawBack();\n\n          _this.drawDigital();\n        }\n      }\n    };\n\n    _this.getDigital = function () {\n      for (var i = 0; i < 4; i++) {\n        _this.digital[i] = [];\n\n        for (var j = 0; j < 4; j++) {\n          _this.digital[i][j] = 0;\n        }\n      }\n    };\n\n    _this.drawRect = function (x, y, c) {\n      _this.ctx.beginPath();\n\n      _this.ctx.fillStyle = c;\n\n      _this.ctx.moveTo(x, y);\n\n      _this.ctx.arcTo(x + _this.box_width, y, x + _this.box_width, y + 1, _this.margin_width * 0.7);\n\n      _this.ctx.arcTo(x + _this.box_width, y + _this.box_width, x + _this.box_width - 1, y + _this.box_width, _this.margin_width * 0.7);\n\n      _this.ctx.arcTo(x, y + _this.box_width, x, y + _this.box_width - 1, _this.margin_width * 0.7);\n\n      _this.ctx.arcTo(x, y, x + 1, y, _this.margin_width * 0.7);\n\n      _this.ctx.fill();\n    };\n\n    _this.drawBack = function () {\n      _this.ctx.beginPath();\n\n      _this.ctx.fillStyle = '#f0d799';\n\n      _this.ctx.fillRect(0, 0, _this.width, _this.height);\n\n      for (var i = 0; i < 4; i++) {\n        for (var j = 0; j < 4; j++) {\n          var c = '';\n\n          if (_this.digital[i][j] == 0) {\n            c = \"#D7C184 \";\n          }\n\n          if (_this.digital[i][j] == 2) {\n            c = \"#f5bb82 \";\n          }\n\n          if (_this.digital[i][j] == 4) {\n            c = \"#DBB280 \";\n          }\n\n          if (_this.digital[i][j] == 8) {\n            c = \"#E1C57A \";\n          }\n\n          if (_this.digital[i][j] == 16) {\n            c = \"#E8B173 \";\n          }\n\n          if (_this.digital[i][j] == 32) {\n            c = \"#F2A769 \";\n          }\n\n          if (_this.digital[i][j] == 64) {\n            c = \"#e08931 \";\n          }\n\n          if (_this.digital[i][j] == 128) {\n            c = \"#f27f0c \";\n          }\n\n          if (_this.digital[i][j] == 256) {\n            c = \"#f76063 \";\n          }\n\n          if (_this.digital[i][j] == 512) {\n            c = \"#e84648 \";\n          }\n\n          if (_this.digital[i][j] == 1024) {\n            c = \"#b03133 \";\n          }\n\n          if (_this.digital[i][j] == 2048) {\n            c = \"#fc080c \";\n          }\n\n          var x = _this.margin_width + i * (_this.box_width + _this.margin_width);\n          var y = _this.margin_width + j * (_this.box_width + _this.margin_width);\n\n          _this.drawRect(x, y, c);\n        }\n      }\n    };\n\n    _this.createRandom = function () {\n      var x = Math.round(Math.random() * 3);\n      var y = Math.round(Math.random() * 3);\n\n      if (_this.digital[x][y] === 0) {\n        _this.digital[x][y] = 2;\n      } else {\n        _this.createRandom();\n      }\n    };\n\n    _this.drawDigital = function () {\n      for (var i = 0; i < 4; i++) {\n        for (var j = 0; j < 4; j++) {\n          if (_this.digital[i][j] > 0) {\n            _this.ctx.beginPath();\n\n            _this.ctx.textAlign = 'center';\n            _this.ctx.textBaseline = 'middle';\n            _this.ctx.fillStyle = 'red';\n            _this.ctx.font = '40px Arial';\n            var x = _this.margin_width + i * (_this.box_width + _this.margin_width) + _this.box_width / 2;\n            var y = _this.margin_width + j * (_this.box_width + _this.margin_width) + _this.box_width / 2;\n\n            _this.ctx.fillText(_this.digital[i][j], x, y);\n          }\n        }\n      }\n    };\n\n    _this.checkDigital = function (arr) {\n      var flag = false;\n\n      if (arr[0] === 0 && arr[1] === 0 && arr[2] === 0 && arr[3] === 0 || arr[0] > 0 && arr[1] === 0 && arr[2] === 0 && arr[3] === 0 || arr[0] > 0 && arr[1] > 0 && arr[2] === 0 && arr[3] === 0 || arr[0] > 0 && arr[1] > 0 && arr[2] > 0 && arr[3] === 0 || arr[0] > 0 && arr[1] > 0 && arr[2] > 0 && arr[3] > 0) {\n        flag = true;\n      }\n\n      if (arr[0] === arr[1] && arr[0] !== 0 || arr[1] === arr[2] && arr[1] !== 0 || arr[2] === arr[3] && arr[2] !== 0 || arr[3] === arr[4] && arr[3] !== 0) {\n        flag = false;\n      }\n\n      return flag;\n    };\n\n    _this.changeDigital = function (arr) {\n      for (var i = 0; i < 3; i++) {\n        if (arr[i] == 0) {\n          var temp = arr[i];\n          arr[i] = arr[i + 1];\n          arr[i + 1] = temp;\n        }\n\n        if (arr[i] == arr[i + 1] && arr[i] != 0) {\n          arr[i] = arr[i] + arr[i + 1];\n          arr[i + 1] = 0;\n        }\n      }\n\n      if (_this.checkDigital(arr)) {\n        return arr;\n      } else {\n        return _this.changeDigital(arr);\n      }\n    };\n\n    _this.data = null;\n    _this.ctx = null;\n    _this.width = null;\n    _this.height = null;\n    _this.box_width = null;\n    _this.margin_width = null;\n    _this.digital = [];\n    return _this;\n  }\n\n  _createClass(Demo2048, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      this.ctx = this.container.getContext('2d');\n      this.width = this.ctx.canvas.width;\n      this.height = this.ctx.canvas.height;\n      this.box_width = this.width * 0.8 * 0.25;\n      this.margin_width = this.width * 0.2 * 0.20;\n      this.getDigital();\n      this.createRandom();\n      this.drawBack();\n      this.drawDigital();\n      window.addEventListener('keydown', function (event) {\n        var e = event || window.event; // console.log(\"ffffffff\", e.keyCode);\n\n        _this2.judgeKeyCode(e.keyCode);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return React.createElement(\"canvas\", {\n        ref: function ref(el) {\n          return _this3.container = el;\n        },\n        width: \"500\",\n        height: \"500\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 255\n        },\n        __self: this\n      });\n    }\n  }]);\n\n  return Demo2048;\n}(Component);\n\nexport { Demo2048 as default };","map":{"version":3,"sources":["/Users/a/min_frotend/src/components_common/demo2048/index.js"],"names":["React","Component","Demo2048","props","judgeKeyCode","keyCode","i","arr","digital","checkDigital","changeDigital","alert","ctx","clearRect","width","height","createRandom","drawBack","drawDigital","getDigital","j","drawRect","x","y","c","beginPath","fillStyle","moveTo","arcTo","box_width","margin_width","fill","fillRect","Math","round","random","textAlign","textBaseline","font","fillText","flag","temp","data","container","getContext","canvas","window","addEventListener","event","e","el"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport './index.scss';\n\nexport default class Demo2048 extends Component{\n    constructor(props){\n        super(props)\n        this.data = null;\n        this.ctx = null;\n        this.width = null;\n        this.height = null;\n        this.box_width = null;\n        this.margin_width = null;\n        this.digital = [];\n    }\n    componentDidMount(){\n        this.ctx = this.container.getContext('2d');\n\n        this.width = this.ctx.canvas.width;\n        this.height = this.ctx.canvas.height;\n\n        this.box_width = this.width*0.8*0.25;\n        this.margin_width = this.width*0.2*0.20;\n\n        this.getDigital();\n\n        this.createRandom();\n        this.drawBack();\n        this.drawDigital();\n\n        window.addEventListener('keydown', (event) => {\n            let e = event || window.event;\n            // console.log(\"ffffffff\", e.keyCode);\n            this.judgeKeyCode(e.keyCode)\n        })        \n\n    }\n    judgeKeyCode = (keyCode) => {\n        if(keyCode === 37){\n            for(let i = 0; i < 4; i++){\n                let arr = [];\n                arr[0] = this.digital[0][i];\n                arr[1] = this.digital[1][i];\n                arr[2] = this.digital[2][i];\n                arr[3] = this.digital[3][i];\n                if(!this.checkDigital(arr)){\n                    arr=this.changeDigital(arr);\n                }\n                this.digital[0][i]=arr[0];\n                this.digital[1][i]=arr[1];\n                this.digital[2][i]=arr[2];\n                this.digital[3][i]=arr[3];\n            }\n\n            if (false) {\n                alert(\"GAME OVER\");\n            }else{\n                this.ctx.clearRect(0, 0, this.width, this.height);\n                this.createRandom();\n                this.drawBack();\n                this.drawDigital();\n            }\n        }else if(keyCode === 38){\n            for(let i = 0; i < 4; i++){\n                let arr = [];\n                arr[0] = this.digital[i][0];\n                arr[1] = this.digital[i][1];\n                arr[2] = this.digital[i][2];\n                arr[3] = this.digital[i][3];\n                if(!this.checkDigital(arr)){\n                    arr=this.changeDigital(arr);\n                }\n                this.digital[i][0]=arr[0];\n                this.digital[i][1]=arr[1];\n                this.digital[i][2]=arr[2];\n                this.digital[i][3]=arr[3];\n            }\n\n            if (false) {\n                alert(\"GAME OVER\");\n            }else{\n                this.ctx.clearRect(0, 0, this.width, this.height);\n                this.createRandom();\n                this.drawBack();\n                this.drawDigital();\n            }\n        }else if(keyCode === 39){\n            for(let i = 0; i < 4; i++){\n                let arr = [];\n                arr[0] = this.digital[3][i];\n                arr[1] = this.digital[2][i];\n                arr[2] = this.digital[1][i];\n                arr[3] = this.digital[0][i];\n                if(!this.checkDigital(arr)){\n                    arr=this.changeDigital(arr);\n                }\n                this.digital[3][i]=arr[0];\n                this.digital[2][i]=arr[1];\n                this.digital[1][i]=arr[2];\n                this.digital[0][i]=arr[3];\n            }\n\n            if (false) {\n                alert(\"GAME OVER\");\n            }else{\n                this.ctx.clearRect(0, 0, this.width, this.height);\n                this.createRandom();\n                this.drawBack();\n                this.drawDigital();\n            }\n        }else if(keyCode === 40){\n            for(let i = 0; i < 4; i++){\n                let arr = [];\n                arr[0] = this.digital[i][3];\n                arr[1] = this.digital[i][2];\n                arr[2] = this.digital[i][1];\n                arr[3] = this.digital[i][0];\n                if(!this.checkDigital(arr)){\n                    arr=this.changeDigital(arr);\n                }\n                this.digital[i][3]=arr[0];\n                this.digital[i][2]=arr[1];\n                this.digital[i][1]=arr[2];\n                this.digital[i][0]=arr[3];\n            }\n\n            if (false) {\n                alert(\"GAME OVER\");\n            }else{\n                this.ctx.clearRect(0, 0, this.width, this.height);\n                this.createRandom();\n                this.drawBack();\n                this.drawDigital();\n            }\n        }\n    }  \n\n    getDigital = () =>{\n        for(let i=0; i < 4; i++){\n            this.digital[i] = [];\n            for (let j = 0; j < 4; j++){\n                this.digital[i][j] = 0;\n            }\n        }\n    }\n    // 绘制小方块\n    drawRect = (x, y, c) => {\n        this.ctx.beginPath();\n        this.ctx.fillStyle=c;\n        this.ctx.moveTo(x,y);\n        this.ctx.arcTo(x+this.box_width,y,x+this.box_width,y+1,this.margin_width*0.7);\n        this.ctx.arcTo(x+this.box_width,y+this.box_width,x+this.box_width-1,y+this.box_width,this.margin_width*0.7);\n        this.ctx.arcTo(x,y+this.box_width,x,y+this.box_width-1,this.margin_width*0.7);\n        this.ctx.arcTo(x,y,x+1,y,this.margin_width*0.7);\n        this.ctx.fill();\n    }\n    // 绘制背景\n    drawBack = () => {\n        this.ctx.beginPath();\n        this.ctx.fillStyle = '#f0d799';\n        this.ctx.fillRect(0, 0, this.width, this.height);\n        for(let i = 0; i < 4; i++){\n            for(let j = 0; j < 4; j++){\n                let c = '';\n                if(this.digital[i][j]==0){c=\"#D7C184 \";}\n                if(this.digital[i][j]==2){c=\"#f5bb82 \";}\n                if(this.digital[i][j]==4){c=\"#DBB280 \";}\n                if(this.digital[i][j]==8){c=\"#E1C57A \";}\n                if(this.digital[i][j]==16){c=\"#E8B173 \";}\n                if(this.digital[i][j]==32){c=\"#F2A769 \";}\n                if(this.digital[i][j]==64){c=\"#e08931 \";}\n                if(this.digital[i][j]==128){c=\"#f27f0c \";}\n                if(this.digital[i][j]==256){c=\"#f76063 \";}\n                if(this.digital[i][j]==512){c=\"#e84648 \";}\n                if(this.digital[i][j]==1024){c=\"#b03133 \";}\n                if(this.digital[i][j]==2048){c=\"#fc080c \";}\n                let x=this.margin_width+i*(this.box_width+this.margin_width);\n                let y=this.margin_width+j*(this.box_width+this.margin_width);\n                this.drawRect(x,y,c);\n            }\n        }\n    }\n    // 生成随机数\n    createRandom = () => {\n        let x = Math.round( Math.random() * 3 )\n        let y = Math.round( Math.random() * 3 )\n\n        if(this.digital[x][y] === 0){\n            this.digital[x][y] = 2\n        }else{\n            this.createRandom();\n        }\n\n    }\n    // 绘制数字\n    drawDigital = () => {\n        for(let i = 0; i < 4; i++){\n            for(let j = 0; j < 4; j++){\n                if(this.digital[i][j] > 0){\n                    this.ctx.beginPath();\n                    this.ctx.textAlign = 'center';\n                    this.ctx.textBaseline = 'middle';\n                    this.ctx.fillStyle = 'red';\n                    this.ctx.font = '40px Arial';\n                    let x = this.margin_width + i * ( this.box_width + this.margin_width ) + this.box_width / 2;\n                    let y = this.margin_width + j * ( this.box_width + this.margin_width ) + this.box_width / 2;\n                    this.ctx.fillText(this.digital[i][j], x, y);\n                }\n            }\n        }\n    }\n    // 判断数组是否已经按列排好\n    checkDigital = (arr) => {\n        var flag=false;\n        if (arr[0] === 0 && arr[1] === 0 && arr[2] === 0 && arr[3] === 0||\n                arr[0] > 0 && arr[1] === 0 && arr[2] === 0 && arr[3] === 0||\n                arr[0] > 0 && arr[1] > 0 && arr[2] === 0 && arr[3] === 0||\n                arr[0] > 0 && arr[1] > 0 && arr[2] > 0 && arr[3] === 0||\n                arr[0] > 0 && arr[1] > 0 && arr[2] > 0 && arr[3] > 0) {\n            flag=true;\n        }\n        if (arr[0] === arr[1] && arr[0] !== 0 ||\n            arr[1] === arr[2] && arr[1] !== 0 ||\n            arr[2] === arr[3] && arr[2] !== 0 ||\n            arr[3] === arr[4] && arr[3] !== 0\n        ) {\n            flag=false;\n        }\n        return flag;\n    }\n\n    changeDigital = (arr) => {\n        for ( let i = 0; i <3; i++) {\n\t\t\tif (arr[i]==0) {\n\t\t\t\tvar temp=arr[i];\n\t\t\t\tarr[i]=arr[i+1];\n\t\t\t\tarr[i+1]=temp;\n\t\t\t}\n\t\t\tif (arr[i]==arr[i+1]&&arr[i]!=0) {\n\t\t\t\tarr[i]=arr[i]+arr[i+1];\n\t\t\t\tarr[i+1]=0;\n\t\t\t}\t\t\n\t\t}\n\t\tif (this.checkDigital(arr)){\n\t\t\treturn arr;\n\t\t}else{\n\t\t\treturn this.changeDigital(arr);\n\t\t}\n    }\n\n\n\n\n    render(){\n        return(\n            <canvas ref={el => this.container = el} width=\"500\" height=\"500\"></canvas>\n        )\n    }\n}"]},"metadata":{},"sourceType":"module"}