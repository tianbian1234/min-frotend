{"ast":null,"code":"import _classCallCheck from \"/Users/a/min_frotend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/a/min_frotend/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/a/min_frotend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/a/min_frotend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/a/min_frotend/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/a/min_frotend/src/components/widget/index.js\";\nimport React, { Component } from 'react';\nimport * as R from 'ramda';\nimport './index.scss';\n\nvar Widget =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Widget, _Component);\n\n  function Widget(props) {\n    var _this;\n\n    _classCallCheck(this, Widget);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Widget).call(this, props));\n\n    _this.handleMouseDown = function (e) {\n      e.stopPropagation();\n\n      var _this$refs$widget$get = _this.refs.widget.getBoundingClientRect(),\n          left = _this$refs$widget$get.left,\n          top = _this$refs$widget$get.top;\n\n      var parentLeft = _this.refs.widget.parentNode.getBoundingClientRect().left;\n\n      var parentTop = _this.refs.widget.parentNode.getBoundingClientRect().top;\n\n      var scrolLeft = e.clientX - left + parentLeft;\n      var scrolTop = e.clientY - top + parentTop;\n\n      _this.setState({\n        left1: scrolLeft,\n        top1: scrolTop,\n        parentLeft: parentLeft,\n        parentTop: parentTop\n      });\n\n      _this.refs.widget.addEventListener(\"mousemove\", _this.handleMouseMove, false);\n    };\n\n    _this.handleMouseUp = function (e) {\n      _this.refs.widget.removeEventListener(\"mousemove\", _this.handleMouseMove);\n    };\n\n    _this.handleMouseMove = function () {\n      var _this$state = _this.state,\n          left1 = _this$state.left1,\n          top1 = _this$state.top1;\n      var e = window.event;\n\n      if (e.clientX - left1 >= 0 || e.clientY - top1 >= 0) {\n        _this.refs.widget.style.left = e.clientX - left1 + 'px';\n        _this.refs.widget.style.top = e.clientY - top1 + 'px';\n      }\n    };\n\n    _this.handleActive = function (e) {\n      _this.refs.widget.style.border = \"2px dashed #00ff00\";\n\n      _this.setState({\n        active: 1\n      });\n    };\n\n    _this.handleScaleDom = function (parentLeft, parentTop, ele, type, e) {\n      var _ele$getBoundingClien = ele.getBoundingClientRect(),\n          left = _ele$getBoundingClien.left,\n          top = _ele$getBoundingClien.top,\n          width = _ele$getBoundingClien.width,\n          height = _ele$getBoundingClien.height;\n\n      var leftNow, topNow, nLeft, nWidth, nHeight, nTop;\n\n      switch (type) {\n        case 'TL':\n          leftNow = left + width;\n          topNow = top + height;\n          nLeft = e.clientY - parentTop + 'px';\n          nTop = e.clientX - parentLeft + 'px';\n          nHeight = topNow - e.clientY + 'px';\n          nWidth = leftNow - e.clientX + 'px';\n          break;\n\n        case 'T':\n          topNow = top + height;\n          console.log(\"llllllllllll\", left);\n          nLeft = left + 'px';\n          console.log(\"nnnnnnnnnnnn\", nLeft);\n          nTop = e.clientY - parentTop + 'px';\n          nWidth = width + 'px';\n          nHeight = topNow - e.clientY + 'px';\n          break;\n\n        case 'TR':\n          leftNow = left;\n          topNow = top + height;\n          nTop = e.clientY - parentTop + 'px';\n          nLeft = left - parentLeft + 'px';\n          nWidth = topNow - e.clientY + 'px';\n          nHeight = e.clientX - leftNow + 'px';\n          break;\n\n        case 'R':\n          leftNow = left;\n          topNow = top + height;\n          nLeft = left - parentLeft + 'px';\n          nTop = top + 'px';\n          nWidth = e.clientX - leftNow + 'px';\n          nHeight = height + 'px';\n          break;\n\n        case 'BR':\n          nLeft = left - parentLeft + 'px';\n          nTop = top - parentTop + 'px';\n          nWidth = e.clientX - left + 'px';\n          nHeight = e.clientY - top + 'px';\n          break;\n\n        case 'B':\n          nLeft = left + 'px';\n          nTop = top - parentTop + 'px';\n          nWidth = width + 'px';\n          nHeight = e.clientY - top + 'px';\n          break;\n\n        case 'BL':\n          leftNow = left + width;\n          nLeft = e.clientX - parentLeft + 'px';\n          nTop = top - parentTop + 'px';\n          nWidth = leftNow - e.clientX + 'px';\n          nHeight = e.clientY - top + 'px';\n          break;\n\n        case 'L':\n          leftNow = left + width;\n          nLeft = e.clientX - parentLeft + 'px';\n          nTop = top + 'px';\n          nWidth = leftNow - e.clientX + 'px';\n          nHeight = height + 'px';\n          break;\n\n        default:\n          break;\n      }\n\n      ele.style.left = nLeft;\n      ele.style.top = nTop;\n      ele.style.width = nWidth;\n      ele.style.height = nHeight;\n      return {\n        nWidth: nWidth,\n        nHeight: nHeight\n      };\n    };\n\n    _this.handleScale = function (type, e) {\n      e.stopPropagation();\n      var _this$state2 = _this.state,\n          parentLeft = _this$state2.parentLeft,\n          parentTop = _this$state2.parentTop;\n      var ControlhandleScaleDom = R.curry(_this.handleScaleDom)(parentLeft, parentTop, _this.refs.widget);\n      console.log(\"222222\", e);\n\n      e.target.onmousemove = function (e) {\n        var _ControlhandleScaleDo = ControlhandleScaleDom(type, e),\n            nWidth = _ControlhandleScaleDo.nWidth,\n            nHeight = _ControlhandleScaleDo.nHeight;\n\n        _this.props.sendSize(nWidth, nHeight);\n      };\n\n      e.target.onmouseup = function () {\n        document.onmousemove = null;\n        document.onmouseup = null;\n      };\n    };\n\n    _this.state = {\n      left1: 0,\n      top1: 0,\n      parentLeft: 0,\n      parentTop: 0,\n      active: 0\n    };\n    return _this;\n  }\n\n  _createClass(Widget, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var active = this.state.active;\n      return React.createElement(\"div\", {\n        className: \"widget-container\",\n        ref: \"widget\",\n        style: {\n          position: 'absolute',\n          cursor: 'move',\n          background: '#cccccc',\n          boxSizing: 'border-box',\n          pading: 10\n        },\n        onMouseDown: this.handleMouseDown,\n        onMouseUp: this.handleMouseUp,\n        onClick: this.handleActive,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }, active === 1 && React.createElement(\"div\", {\n        className: \"fangsuo\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"resize-handle top_left\",\n        onMouseDown: function onMouseDown(e) {\n          return _this2.handleScale('TL', e);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }), React.createElement(\"span\", {\n        className: \"resize-handle top\",\n        onMouseDown: function onMouseDown(e) {\n          return _this2.handleScale('T', e);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }), React.createElement(\"span\", {\n        className: \"resize-handle top_right\",\n        onMouseDown: function onMouseDown(e) {\n          return _this2.handleScale('TR', e);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      }), React.createElement(\"span\", {\n        className: \"resize-handle right\",\n        onMouseDown: function onMouseDown(e) {\n          return _this2.handleScale('R', e);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      }), React.createElement(\"span\", {\n        className: \"resize-handle bottom_right\",\n        onMouseDown: function onMouseDown(e) {\n          return _this2.handleScale('BR', e);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      }), React.createElement(\"span\", {\n        className: \"resize-handle bottom\",\n        onMouseDown: function onMouseDown(e) {\n          return _this2.handleScale('B', e);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161\n        },\n        __self: this\n      }), React.createElement(\"span\", {\n        className: \"resize-handle bottom_left\",\n        onMouseDown: function onMouseDown(e) {\n          return _this2.handleScale('BL', e);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      }), React.createElement(\"span\", {\n        className: \"resize-handle left\",\n        onMouseDown: function onMouseDown(e) {\n          return _this2.handleScale('L', e);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      })), this.props.children);\n    }\n  }]);\n\n  return Widget;\n}(Component);\n\nexport { Widget as default };","map":{"version":3,"sources":["/Users/a/min_frotend/src/components/widget/index.js"],"names":["React","Component","R","Widget","props","handleMouseDown","e","stopPropagation","refs","widget","getBoundingClientRect","left","top","parentLeft","parentNode","parentTop","scrolLeft","clientX","scrolTop","clientY","setState","left1","top1","addEventListener","handleMouseMove","handleMouseUp","removeEventListener","state","window","event","style","handleActive","border","active","handleScaleDom","ele","type","width","height","leftNow","topNow","nLeft","nWidth","nHeight","nTop","console","log","handleScale","ControlhandleScaleDom","curry","target","onmousemove","sendSize","onmouseup","document","position","cursor","background","boxSizing","pading","children"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport * as R from 'ramda';\nimport './index.scss';\n\nexport default class Widget extends Component{\n    constructor(props){\n        super(props)\n        this.state = {\n            left1: 0,\n            top1: 0,\n            parentLeft: 0,\n            parentTop: 0,\n            active: 0\n        }\n    }\n\n    handleMouseDown = (e) => {\n        e.stopPropagation();\n        let { left, top } = this.refs.widget.getBoundingClientRect();\n        let parentLeft = this.refs.widget.parentNode.getBoundingClientRect().left;\n        let parentTop = this.refs.widget.parentNode.getBoundingClientRect().top;\n        let scrolLeft = e.clientX - left + parentLeft;\n        let scrolTop = e.clientY - top + parentTop;\n\n        this.setState({\n            left1: scrolLeft,\n            top1: scrolTop,\n            parentLeft: parentLeft,\n            parentTop: parentTop,\n        })\n        this.refs.widget.addEventListener(\"mousemove\", this.handleMouseMove, false)\n    }\n\n    handleMouseUp = (e) => {\n        this.refs.widget.removeEventListener(\"mousemove\", this.handleMouseMove)\n    }\n\n    handleMouseMove = () => {\n        let { left1, top1 } = this.state;\n        let e = window.event;\n        if(e.clientX - left1 >= 0 || e.clientY - top1 >= 0){\n            this.refs.widget.style.left = (e.clientX - left1)+'px';\n            this.refs.widget.style.top = (e.clientY - top1)+'px';\n        }\n    }\n\n    handleActive = (e) => {\n        this.refs.widget.style.border = \"2px dashed #00ff00\";\n        this.setState({\n            active: 1\n        })\n    }\n    handleScaleDom = (parentLeft, parentTop, ele, type, e) => {\n        let {  left, top, width, height } = ele.getBoundingClientRect();\n        let leftNow, topNow, nLeft, nWidth, nHeight, nTop;\n        switch(type){\n            case 'TL':\n                leftNow = left + width; topNow = top + height;\n                nLeft = (e.clientY-parentTop) + 'px';\n                nTop = (e.clientX-parentLeft) + 'px';\n                nHeight = (topNow - e.clientY) + 'px'; \n                nWidth = (leftNow - e.clientX) + 'px';\n                break;\n            case 'T':\n                topNow = top + height;\n                console.log(\"llllllllllll\", left);\n                nLeft = left + 'px';\n                console.log(\"nnnnnnnnnnnn\", nLeft);\n                nTop = (e.clientY-parentTop) + 'px';\n                nWidth = width + 'px';\n                nHeight = (topNow - e.clientY) + 'px'; \n                break;\n            case 'TR':\n                leftNow = left; topNow = top + height;\n                nTop = (e.clientY-parentTop) + 'px';\n                nLeft = (left-parentLeft) + 'px';\n                nWidth = (topNow - e.clientY) + 'px';\n                nHeight = (e.clientX - leftNow) + 'px';\n                break;\n            case 'R':\n                leftNow = left; topNow = top + height;\n                nLeft = (left-parentLeft) + 'px';\n                nTop = top + 'px';\n                nWidth = (e.clientX - leftNow) + 'px';\n                nHeight = height + 'px';\n                break;\n            case 'BR':\n                nLeft = (left-parentLeft) + 'px';\n                nTop = (top-parentTop) + 'px';\n                nWidth = (e.clientX - left) + 'px';\n                nHeight = (e.clientY - top) + 'px';\n                break;\n            case 'B':\n                nLeft = left + 'px';\n                nTop = (top-parentTop) + 'px';\n                nWidth = width + 'px';\n                nHeight = (e.clientY - top) + 'px';\n                break;\n            case 'BL':\n                leftNow = left + width;\n                nLeft = (e.clientX-parentLeft) + 'px';\n                nTop = (top-parentTop) + 'px';\n                nWidth = (leftNow - e.clientX) + 'px';\n                nHeight = (e.clientY - top) + 'px';\n                break;\n            case 'L':\n                leftNow = left + width;\n                nLeft= (e.clientX-parentLeft) + 'px';\n                nTop = top + 'px';\n                nWidth = (leftNow - e.clientX) + 'px';\n                nHeight = height + 'px';\n                break;\n            default:\n                break;\n            \n        }\n\n        ele.style.left = nLeft;\n        ele.style.top = nTop;\n        ele.style.width = nWidth;\n        ele.style.height = nHeight;\n\n        return { nWidth, nHeight };\n\n    }\n    handleScale = (type, e) => {\n        e.stopPropagation();\n        let { parentLeft, parentTop } = this.state;\n\n        let ControlhandleScaleDom = R.curry(this.handleScaleDom)(parentLeft, parentTop, this.refs.widget)\n\n        console.log(\"222222\", e);\n\n        e.target.onmousemove = (e) => {\n            let { nWidth, nHeight } = ControlhandleScaleDom(type, e)\n            this.props.sendSize(nWidth, nHeight);\n        }\n        e.target.onmouseup = () => {\n            document.onmousemove = null;\n            document.onmouseup = null;\n        }\n    }\n\n    render(){\n        let { active } = this.state;\n        return(\n            <div \n                className=\"widget-container\"\n                ref=\"widget\"\n                style={{position: 'absolute', cursor: 'move', background: '#cccccc',boxSizing: 'border-box', pading: 10}}\n                onMouseDown={this.handleMouseDown}\n                onMouseUp = {this.handleMouseUp}\n                onClick = { this.handleActive }\n            >\n            {active === 1 && <div className=\"fangsuo\">\n                <span className=\"resize-handle top_left\" onMouseDown={(e) => this.handleScale('TL', e)}></span>\n                <span className=\"resize-handle top\" onMouseDown={(e) => this.handleScale('T', e)}></span>\n                <span className=\"resize-handle top_right\" onMouseDown={(e) => this.handleScale('TR', e)}></span>\n                <span className=\"resize-handle right\" onMouseDown={(e) => this.handleScale('R', e)}></span>\n                <span className=\"resize-handle bottom_right\" onMouseDown={(e) => this.handleScale('BR', e)}></span>\n                <span className=\"resize-handle bottom\" onMouseDown={(e) => this.handleScale('B', e)}></span>\n                <span className=\"resize-handle bottom_left\" onMouseDown={(e) => this.handleScale('BL', e)}></span>\n                <span className=\"resize-handle left\" onMouseDown={(e) => this.handleScale('L', e)}></span>\n            </div>}\n                {this.props.children}\n            </div>\n        )\n    }\n} "]},"metadata":{},"sourceType":"module"}